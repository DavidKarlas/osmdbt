
# NAME

osmdbt-state.txt - Format of the state.txt file generated by osmdbt tools


# DESCRIPTION

The osmdbt tool generate and read `state.txt` files holding the metadata
for replication diffs.

The state file consists of any number of lines separated by the linefeed
character (ASCII 0x0a). Empty lines and lines starting with a hash mark (`#`)
must be ignored. All other lines contain a property in the format `KEY=VALUE`.

Properties consist of a KEY and a VALUE separated by an equal sign (`=`).
There are no spaces to the left or right of the equal character. Unknown keys
should be ignored, new keys might be introduced in the future.

The key will always only contain ASCII characters a-z, A-Z, 0-9, and the
underscore `_`. The value can contain any UTF-8 character.


# COMMENTS

The osmdbt commands start the state files they write with a comment line with
the current timestamp if started with the `--with-comment` command line option.
This is for backwards compatibilty with some software that expects this comment
and the feature might be removed in the future.

Software reading a state file should not expect any specific comment to be
there. They should ignore all comment lines and never try to attribute meaning
to anything in comment lines.


# PROPERTIES

sequenceNumber
:   The sequence number of this change file. Monotonically increasing from
    one file to the next. Diff files are expected to be read in the order of
    this sequence number. Do not rely on there not being holes in the sequence.

timestamp
:   The largest timestamp of all the objects in the corresponding diff file
    in ISO format (`yyyy-mm-ddThh:mm:ssZ`). The colons (`:`) might or might not
    be "escaped" with a leading backslash character (`\`). Readers should
    understand both formats. Note that this timestamp will usually be larger
    than the time stamp in state files with smaller sequenceNumber, but this
    doesn't have to be the case.


# HISTORY

The `state.txt` files were originally read and written only by Osmosis using
the `java.util.Properties` class. A description of that file format is at
https://en.wikipedia.org/wiki/.properties but not all the features of that
format described there were ever used and this shouldn't be seen as a good
reference. The definition here is somewhat "tighter" than the description
there.


# SEE ALSO

* **osmdbt**(1)

